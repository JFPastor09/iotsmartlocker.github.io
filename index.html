<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Locker System</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="container">
            <div class="logo-container">
                <h1>Smart Locker System</h1>
                <div class="logo">
                    <img src="locker-icon.png" alt="Smart Locker Logo">
                </div>
            </div>
            <div class="form-container">
                <h2>Login</h2>
                <div class="input-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="Enter your email">
                </div>
                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>
                <button id="loginBtn" class="primary-btn">Login</button>
                <div id="loginError" class="error-message"></div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="screen">
        <header>
            <h1>Admin Dashboard</h1>
            <div class="user-controls">
                <span id="adminName">Admin</span>
                <button id="adminLogoutBtn" class="logout-btn">Logout</button>
            </div>
        </header>
        
        <div class="dashboard-container">
            <div class="sidebar">
                <nav>
                    <ul>
                        <li class="active" data-tab="lockerStatus">Locker Status</li>
                        <li data-tab="lockerHistory">History</li>
                        <li data-tab="userManagement">User Management</li>
                        <li data-tab="settings">Settings</li>
                    </ul>
                </nav>
            </div>
            
            <div class="content">
                <!-- Locker Status Tab -->
                <div id="lockerStatus" class="tab-content active">
                    <h2>Locker Status Overview</h2>
                    
                    <div class="locker-grid">
                        <div class="locker-card" id="locker1Card">
                            <h3>Locker 1</h3>
                            <div class="locker-info">
                                <p>Status: <span id="locker1Status" class="status">Unknown</span></p>
                                <p>Temperature: <span id="locker1Temp">--</span>째C</p>
                                <p>Humidity: <span id="locker1Humidity">--</span>%</p>
                                <p>Gas Level: <span id="locker1Gas">--</span></p>
                                <p>Last Access: <span id="locker1LastAccess">--</span></p>
                            </div>
                            <div class="locker-controls">
                                <input type="text" id="locker1Code" placeholder="6-digit code" maxlength="6" pattern="\d{6}">
                                <button class="remote-access-btn" data-locker="1">Remote Access</button>
                            </div>
                        </div>
                        
                        <div class="locker-card" id="locker2Card">
                            <h3>Locker 2</h3>
                            <div class="locker-info">
                                <p>Status: <span id="locker2Status" class="status">Unknown</span></p>
                                <p>Temperature: <span id="locker2Temp">--</span>째C</p>
                                <p>Humidity: <span id="locker2Humidity">--</span>%</p>
                                <p>Gas Level: <span id="locker2Gas">--</span></p>
                                <p>Last Access: <span id="locker2LastAccess">--</span></p>
                            </div>
                            <div class="locker-controls">
                                <input type="text" id="locker2Code" placeholder="6-digit code" maxlength="6" pattern="\d{6}">
                                <button class="remote-access-btn" data-locker="2">Remote Access</button>
                            </div>
                        </div>
                        
                        <div class="locker-card" id="locker3Card">
                            <h3>Locker 3</h3>
                            <div class="locker-info">
                                <p>Status: <span id="locker3Status" class="status">Unknown</span></p>
                                <p>Temperature: <span id="locker3Temp">--</span>째C</p>
                                <p>Humidity: <span id="locker3Humidity">--</span>%</p>
                                <p>Gas Level: <span id="locker3Gas">--</span></p>
                                <p>Last Access: <span id="locker3LastAccess">--</span></p>
                            </div>
                            <div class="locker-controls">
                                <input type="text" id="locker3Code" placeholder="6-digit code" maxlength="6" pattern="\d{6}">
                                <button class="remote-access-btn" data-locker="3">Remote Access</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Locker History Tab -->
                <div id="lockerHistory" class="tab-content">
                    <h2>Access History</h2>
                    <div class="filter-controls">
                        <select id="lockerFilter">
                            <option value="all">All Lockers</option>
                            <option value="1">Locker 1</option>
                            <option value="2">Locker 2</option>
                            <option value="3">Locker 3</option>
                        </select>
                        <input type="date" id="dateFilter">
                        <button id="filterBtn">Filter</button>
                    </div>
                    
                    <div class="history-table-container">
                        <table id="historyTable">
                            <thead>
                                <tr>
                                    <th>Locker</th>
                                    <th>Action</th>
                                    <th>Time</th>
                                    <th>User</th>
                                    <th>Access Method</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <!-- History data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- User Management Tab -->
                <div id="userManagement" class="tab-content">
                    <h2>User Management</h2>
                    <div class="user-list">
                        <table id="userTable">
                            <thead>
                                <tr>
                                    <th>Email</th>
                                    <th>Name</th>
                                    <th>Assigned Locker</th>
                                    <th>Last Access</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="userTableBody">
                                <!-- User data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <h2>Admin Settings</h2>
                    <div class="settings-form">
                        <div class="input-group">
                            <label for="adminCurrentPassword">Current Password</label>
                            <input type="password" id="adminCurrentPassword">
                        </div>
                        <div class="input-group">
                            <label for="adminNewPassword">New Password</label>
                            <input type="password" id="adminNewPassword">
                        </div>
                        <div class="input-group">
                            <label for="adminConfirmPassword">Confirm Password</label>
                            <input type="password" id="adminConfirmPassword">
                        </div>
                        <button id="changeAdminPasswordBtn" class="primary-btn">Update Password</button>
                        <div id="passwordChangeMessage" class="message"></div>
                    </div>
                    
                    <h2>System Settings</h2>
                    <div class="settings-form">
                        <div class="input-group">
                            <label for="tempThreshold">Temperature Threshold (째C)</label>
                            <input type="number" id="tempThreshold" min="20" max="50" value="37">
                        </div>
                        <div class="input-group">
                            <label for="gasThreshold">Gas Alert Threshold</label>
                            <input type="number" id="gasThreshold" min="500" max="3000" value="1800">
                        </div>
                        <button id="updateThresholdsBtn" class="primary-btn">Update Thresholds</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="userDashboard" class="screen">
        <header>
            <h1>My Locker</h1>
            <div class="user-controls">
                <span id="userName">User</span>
                <button id="userLogoutBtn" class="logout-btn">Logout</button>
            </div>
        </header>
        
        <div class="dashboard-container">
            <div class="sidebar">
                <nav>
                    <ul>
                        <li class="active" data-tab="myLocker">My Locker</li>
                        <li data-tab="myHistory">Access History</li>
                        <li data-tab="userSettings">Settings</li>
                    </ul>
                </nav>
            </div>
            
            <div class="content">
                <!-- My Locker Tab -->
                <div id="myLocker" class="tab-content active">
                    <div class="user-locker-container">
                        <div class="locker-card large" id="userLockerCard">
                            <h2>Locker <span id="userLockerNumber">--</span></h2>
                            <div class="locker-status-large">
                                <div class="status-indicator" id="userLockerStatusIndicator"></div>
                                <span id="userLockerStatus">Unknown</span>
                            </div>
                            <div class="locker-info">
                                <div class="info-row">
                                    <div class="info-item">
                                        <h3>Temperature</h3>
                                        <p><span id="userLockerTemp">--</span>째C</p>
                                    </div>
                                    <div class="info-item">
                                        <h3>Humidity</h3>
                                        <p><span id="userLockerHumidity">--</span>%</p>
                                    </div>
                                </div>
                                <div class="info-row">
                                    <div class="info-item">
                                        <h3>Gas Level</h3>
                                        <p><span id="userLockerGas">--</span></p>
                                    </div>
                                    <div class="info-item">
                                        <h3>Last Access</h3>
                                        <p><span id="userLockerLastAccess">--</span></p>
                                    </div>
                                </div>
                            </div>
                            <div class="locker-controls">
                                <input type="text" id="userLockerCode" placeholder="Enter 6-digit code" maxlength="6" pattern="\d{6}">
                                <button id="userRemoteAccessBtn" class="primary-btn">Remote Access</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- My History Tab -->
                <div id="myHistory" class="tab-content">
                    <h2>My Access History</h2>
                    <div class="filter-controls">
                        <input type="date" id="userDateFilter">
                        <button id="userFilterBtn">Filter</button>
                    </div>
                    
                    <div class="history-table-container">
                        <table id="userHistoryTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Action</th>
                                    <th>Access Method</th>
                                </tr>
                            </thead>
                            <tbody id="userHistoryTableBody">
                                <!-- User history data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- User Settings Tab -->
                <div id="userSettings" class="tab-content">
                    <h2>Account Settings</h2>
                    <div class="settings-form">
                        <div class="input-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword">
                        </div>
                        <div class="input-group">
                            <label for="newPassword">New Password</label>
                            <input type="password" id="newPassword">
                        </div>
                        <div class="input-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <input type="password" id="confirmPassword">
                        </div>
                        <button id="changePasswordBtn" class="primary-btn">Update Password</button>
                        <div id="userPasswordChangeMessage" class="message"></div>
                    </div>
                    
                    <h2>Notification Settings</h2>
                    <div class="settings-form">
                        <div class="input-group">
                            <label for="phoneNumber">Phone Number (for SMS alerts)</label>
                            <input type="tel" id="phoneNumber" placeholder="+639XXXXXXXXX">
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="tempAlerts" checked>
                            <label for="tempAlerts">Temperature Alerts</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="gasAlerts" checked>
                            <label for="gasAlerts">Gas Detection Alerts</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="accessAlerts" checked>
                            <label for="accessAlerts">Unauthorized Access Alerts</label>
                        </div>
                        <button id="saveNotificationSettingsBtn" class="primary-btn">Save Settings</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="offlineIndicator" class="hidden">
        <span>Offline Mode - Limited functionality available</span>
    </div>

    <script src="app.js"></script>
</body>
</html>

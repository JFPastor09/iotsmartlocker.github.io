<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Locker System - Login</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { primary: "#4f46e5", secondary: "#10b981" },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <style>
      :where([class^="ri-"])::before { content: "\f3c2"; }
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
      }
      input[type="number"] {
      -moz-appearance: textfield;
      }
      .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
      }
      .switch input {
      opacity: 0;
      width: 0;
      height: 0;
      }
      .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #e5e7eb;
      transition: .4s;
      border-radius: 30px;
      }
      .slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
      }
      input:checked + .slider {
      background-color: #4f46e5;
      }
      input:checked + .slider:before {
      transform: translateX(30px);
      }
      .custom-checkbox {
      appearance: none;
      width: 20px;
      height: 20px;
      border: 2px solid #d1d5db;
      border-radius: 4px;
      outline: none;
      cursor: pointer;
      position: relative;
      background-color: white;
      }
      .custom-checkbox:checked {
      background-color: #4f46e5;
      border-color: #4f46e5;
      }
      .custom-checkbox:checked::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 6px;
      width: 6px;
      height: 10px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
      }
      .custom-radio {
      appearance: none;
      width: 20px;
      height: 20px;
      border: 2px solid #d1d5db;
      border-radius: 50%;
      outline: none;
      cursor: pointer;
      position: relative;
      background-color: white;
      }
      .custom-radio:checked {
      border-color: #4f46e5;
      }
      .custom-radio:checked::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #4f46e5;
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <div
      id="login-page"
      class="min-h-screen flex items-center justify-center p-4"
    >
      <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-8">
        <div class="text-center mb-8">
          <h1 class="font-['Pacifico'] text-3xl text-primary">logo</h1>
          <p class="text-gray-600 mt-2">Smart Locker System</p>
        </div>
        <div class="mb-6">
          <div class="flex justify-center space-x-4 mb-6">
            <div class="flex items-center">
              <input
                type="radio"
                id="user-role"
                name="role"
                value="user"
                class="custom-radio"
                checked
              />
              <label for="user-role" class="ml-2 text-gray-700">User</label>
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="admin-role"
                name="role"
                value="admin"
                class="custom-radio"
              />
              <label for="admin-role" class="ml-2 text-gray-700">Admin</label>
            </div>
          </div>
          <div class="mb-4">
            <label
              for="username"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Username</label
            >
            <div class="relative">
              <div
                class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
              >
                <i class="ri-user-line text-gray-400"></i>
              </div>
              <input
                type="text"
                id="username"
                class="pl-10 w-full h-12 border-gray-300 border rounded-button focus:ring-2 focus:ring-primary focus:border-primary focus:outline-none px-4"
                placeholder="Enter your username"
              />
            </div>
          </div>
          <div class="mb-6">
            <label
              for="password"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Password</label
            >
            <div class="relative">
              <div
                class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
              >
                <i class="ri-lock-line text-gray-400"></i>
              </div>
              <input
                type="password"
                id="password"
                class="pl-10 w-full h-12 border-gray-300 border rounded-button focus:ring-2 focus:ring-primary focus:border-primary focus:outline-none px-4"
                placeholder="Enter your password"
              />
              <div
                class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer"
                id="toggle-password"
              >
                <i class="ri-eye-line text-gray-400"></i>
              </div>
            </div>
          </div>
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center">
              <input type="checkbox" id="remember-me" class="custom-checkbox" />
              <label for="remember-me" class="ml-2 text-sm text-gray-600"
                >Remember me</label
              >
            </div>
            <a
              href="#"
              id="forgot-password-link"
              class="text-sm text-primary hover:text-primary-dark"
              >Forgot password?</a
            >
            <div
              id="password-recovery-modal"
              class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50"
            >
              <div
                class="relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6"
              >
                <div class="flex justify-between items-center mb-4">
                  <h3 class="text-xl font-semibold text-gray-800">
                    Password Recovery
                  </h3>
                  <button
                    id="close-recovery-modal"
                    class="text-gray-400 hover:text-gray-500"
                  >
                    <i class="ri-close-line text-2xl"></i>
                  </button>
                </div>
                <p class="text-gray-600 mb-6">
                  Enter your email address below. We'll send you instructions to
                  reset your password.
                </p>
                <form id="recovery-form" class="space-y-4">
                  <div>
                    <label
                      for="recovery-email"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Email Address</label
                    >
                    <input
                      type="email"
                      id="recovery-email"
                      class="w-full border-gray-300 border rounded-button px-3 py-2 focus:ring-2 focus:ring-primary focus:border-primary"
                      placeholder="Enter your email address"
                      required
                    />
                  </div>
                  <div class="flex space-x-3">
                    <button
                      type="submit"
                      class="flex-1 bg-primary text-white py-2 px-4 rounded-button hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button"
                    >
                      Send Reset Link
                    </button>
                    <button
                      type="button"
                      id="cancel-recovery"
                      class="flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-button hover:bg-gray-300 transition duration-200 whitespace-nowrap !rounded-button"
                    >
                      Cancel
                    </button>
                  </div>
                </form>
                <div id="recovery-success" class="hidden">
                  <div class="text-center py-4">
                    <div
                      class="w-12 h-12 rounded-full bg-green-100 mx-auto flex items-center justify-center mb-4"
                    >
                      <i class="ri-check-line text-2xl text-green-600"></i>
                    </div>
                    <h4 class="text-lg font-medium text-gray-800 mb-2">
                      Reset Link Sent
                    </h4>
                    <p class="text-gray-600">
                      Please check your email for instructions to reset your
                      password.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button
            id="login-btn"
            class="w-full bg-primary text-white py-3 px-4 rounded-button hover:bg-primary/90 transition duration-200 flex items-center justify-center whitespace-nowrap !rounded-button"
          >
            <span>Login</span>
          </button>
        </div>
      </div>
    </div>
    <div id="admin-dashboard" class="hidden min-h-screen bg-gray-50">
      <header class="bg-white shadow-sm">
        <div
          class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center"
        >
          <div class="flex items-center">
            <h1 class="font-['Pacifico'] text-2xl text-primary">logo</h1>
            <span class="ml-4 text-gray-600 text-sm">Smart Locker System</span>
          </div>
          <div class="flex items-center space-x-4">
            <div class="flex items-center">
              <div
                class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center"
              >
                <i class="ri-user-line text-gray-600"></i>
              </div>
              <div class="relative ml-2">
                <div class="flex flex-col">
                  <span
                    id="admin-name"
                    class="text-gray-700 font-medium cursor-pointer hover:text-primary"
                    >Admin Portal</span
                  >
                  <span
                    id="admin-username"
                    class="text-sm text-gray-500 cursor-pointer hover:text-primary"
                    >admin@system</span
                  >
                  <span id="admin-email" class="text-sm text-gray-500"
                    >admin@gmail.com</span
                  >
                </div>
                <div
                  id="admin-name-edit"
                  class="hidden absolute top-0 left-0 right-0 bg-white shadow-lg rounded-lg p-3 z-10 w-64"
                >
                  <div class="mb-2">
                    <label class="text-xs text-gray-500 mb-1 block"
                      >Display Name</label
                    >
                    <input
                      type="text"
                      class="w-full border-gray-300 border rounded-button px-2 py-1 text-sm"
                      value="Admin Portal"
                    />
                  </div>
                  <div class="mb-2">
                    <label class="text-xs text-gray-500 mb-1 block"
                      >Username</label
                    >
                    <input
                      type="text"
                      class="w-full border-gray-300 border rounded-button px-2 py-1 text-sm"
                      value="admin@system"
                    />
                  </div>
                  <div class="mb-3">
                    <label class="text-xs text-gray-500 mb-1 block"
                      >Email</label
                    >
                    <input
                      type="email"
                      class="w-full border-gray-300 border rounded-button px-2 py-1 text-sm"
                      value="admin@gmail.com"
                    />
                    <div
                      id="email-verification-status"
                      class="hidden mt-1 text-xs text-orange-500"
                    >
                      Verification email sent. Please check your inbox.
                    </div>
                  </div>
                  <div class="flex justify-end space-x-2">
                    <button
                      class="text-gray-500 hover:text-gray-700 text-sm px-2 py-1"
                      onclick="cancelAdminEdit()"
                    >
                      Cancel
                    </button>
                    <button
                      class="text-primary hover:text-primary/80 text-sm px-2 py-1"
                      onclick="saveAdminName()"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <button
              id="admin-logout"
              class="bg-gray-200 text-gray-700 py-2 px-4 rounded-button hover:bg-gray-300 transition duration-200 whitespace-nowrap !rounded-button"
            >
              <i class="ri-logout-box-line mr-1"></i> Logout
            </button>
          </div>
        </div>
      </header>
      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="mb-6">
          <h2 class="text-2xl font-semibold text-gray-800">Lockers Overview</h2>
          <p class="text-gray-600">Monitor and manage all smart lockers</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
          <!-- Locker 1 -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="flex items-center justify-between p-4 border-b">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center"
                >
                  <i class="ri-inbox-line text-blue-600"></i>
                </div>
                <h3 class="ml-3 font-medium text-gray-800">Locker #1</h3>
              </div>
              <div class="flex items-center">
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                >
                  Occupied
                </span>
              </div>
            </div>
            <div class="p-4">
              <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Temperature</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-temp-hot-line text-orange-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >24.5°C</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Humidity</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-drop-line text-blue-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800">45%</span>
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Gas Level (MQ2)</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-gas-station-line text-gray-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >Normal</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Weight</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-scales-line text-gray-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >8.2 kg</span
                    >
                  </div>
                </div>
              </div>
              <div class="border-t pt-4 mb-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700"
                    >Locker Owner</span
                  >
                  <div class="flex items-center space-x-2">
                    <button
                      class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                      onclick="editLockerOwner(1)"
                    >
                      <i class="ri-edit-line mr-1"></i> Edit
                    </button>
                    <button
                      class="text-red-500 text-sm hover:text-red-600 whitespace-nowrap !rounded-button"
                      onclick="deleteLockerOwner(1)"
                    >
                      <i class="ri-delete-bin-line mr-1"></i> Delete
                    </button>
                  </div>
                </div>
                <div class="bg-gray-50 rounded-lg p-3">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-gray-700">Emily Johnson</p>
                      <p class="text-xs text-gray-500">
                        emily.johnson@gmail.com
                      </p>
                    </div>
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                    >
                      Active
                    </span>
                  </div>
                </div>
              </div>
              <div class="flex justify-between items-center mb-4">
                <div class="flex items-center">
                  <i class="ri-door-lock-line text-gray-500 mr-2"></i>
                  <span class="text-gray-700"
                    >Door: <span class="font-medium">Closed</span></span
                  >
                </div>
                <div class="flex space-x-2">
                  <button
                    class="bg-primary text-white py-1 px-3 rounded-button text-sm hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-unlock-line mr-1"></i> Open
                  </button>
                  <button
                    class="bg-gray-200 text-gray-700 py-1 px-3 rounded-button text-sm hover:bg-gray-300 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-line mr-1"></i> Close
                  </button>
                </div>
              </div>
              <div class="border-t pt-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700"
                    >User Password</span
                  >
                  <button
                    class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                    id="edit-password-1"
                  >
                    <i class="ri-edit-line mr-1"></i> Edit
                  </button>
                </div>
                <div class="relative" id="password-display-1">
                  <input
                    type="password"
                    value="123456"
                    class="w-full border-gray-300 border rounded-button px-3 py-2 text-gray-700 bg-gray-50"
                    readonly
                  />
                  <div
                    class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer toggle-view-password"
                  >
                    <i class="ri-eye-line text-gray-400"></i>
                  </div>
                </div>
                <div class="hidden" id="password-edit-1">
                  <div class="flex space-x-2">
                    <input
                      type="text"
                      class="w-full border-gray-300 border rounded-button px-3 py-2"
                      placeholder="New 6-digit password"
                      maxlength="6"
                      pattern="[0-9]{6}"
                    />
                    <button
                      class="bg-primary text-white py-2 px-3 rounded-button hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button save-password"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="border-t p-4">
              <div class="flex justify-between items-center mb-3">
                <h4 class="font-medium text-gray-700">Recent Activity</h4>
                <button
                  class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                >
                  View All
                </button>
              </div>
              <div class="space-y-3">
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-door-lock-line text-blue-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">Door opened by user</p>
                    <p class="text-xs text-gray-500">Today, 10:42 AM</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-scales-line text-green-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">
                      Item placed inside (8.2 kg)
                    </p>
                    <p class="text-xs text-gray-500">Today, 10:44 AM</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-door-lock-line text-blue-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">Door closed by user</p>
                    <p class="text-xs text-gray-500">Today, 10:45 AM</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Locker 2 -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="flex items-center justify-between p-4 border-b">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center"
                >
                  <i class="ri-inbox-line text-green-600"></i>
                </div>
                <h3 class="ml-3 font-medium text-gray-800">Locker #2</h3>
              </div>
              <div class="flex items-center">
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                >
                  Vacant
                </span>
              </div>
            </div>
            <div class="p-4">
              <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Temperature</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-temp-hot-line text-orange-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >23.8°C</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Humidity</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-drop-line text-blue-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800">42%</span>
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Gas Level (MQ2)</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-gas-station-line text-gray-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >Normal</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Weight</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-scales-line text-gray-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >0.0 kg</span
                    >
                  </div>
                </div>
              </div>
              <div class="border-t pt-4 mb-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700"
                    >Locker Owner</span
                  >
                  <div class="flex items-center space-x-2">
                    <button
                      class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                      onclick="editLockerOwner(1)"
                    >
                      <i class="ri-edit-line mr-1"></i> Edit
                    </button>
                    <button
                      class="text-red-500 text-sm hover:text-red-600 whitespace-nowrap !rounded-button"
                      onclick="deleteLockerOwner(1)"
                    >
                      <i class="ri-delete-bin-line mr-1"></i> Delete
                    </button>
                  </div>
                </div>
                <div class="bg-gray-50 rounded-lg p-3">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-gray-700">Emily Johnson</p>
                      <p class="text-xs text-gray-500">
                        emily.johnson@gmail.com
                      </p>
                    </div>
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                    >
                      Active
                    </span>
                  </div>
                </div>
              </div>
              <div class="flex justify-between items-center mb-4">
                <div class="flex items-center">
                  <i class="ri-door-lock-line text-gray-500 mr-2"></i>
                  <span class="text-gray-700"
                    >Door: <span class="font-medium">Closed</span></span
                  >
                </div>
                <div class="flex space-x-2">
                  <button
                    class="bg-primary text-white py-1 px-3 rounded-button text-sm hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-unlock-line mr-1"></i> Open
                  </button>
                  <button
                    class="bg-gray-200 text-gray-700 py-1 px-3 rounded-button text-sm hover:bg-gray-300 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-line mr-1"></i> Close
                  </button>
                </div>
              </div>
              <div class="border-t pt-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700"
                    >User Password</span
                  >
                  <button
                    class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                    id="edit-password-2"
                  >
                    <i class="ri-edit-line mr-1"></i> Edit
                  </button>
                </div>
                <div class="relative" id="password-display-2">
                  <input
                    type="password"
                    value="789012"
                    class="w-full border-gray-300 border rounded-button px-3 py-2 text-gray-700 bg-gray-50"
                    readonly
                  />
                  <div
                    class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer toggle-view-password"
                  >
                    <i class="ri-eye-line text-gray-400"></i>
                  </div>
                </div>
                <div class="hidden" id="password-edit-2">
                  <div class="flex space-x-2">
                    <input
                      type="text"
                      class="w-full border-gray-300 border rounded-button px-3 py-2"
                      placeholder="New 6-digit password"
                      maxlength="6"
                      pattern="[0-9]{6}"
                    />
                    <button
                      class="bg-primary text-white py-2 px-3 rounded-button hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button save-password"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="border-t p-4">
              <div class="flex justify-between items-center mb-3">
                <h4 class="font-medium text-gray-700">Recent Activity</h4>
                <button
                  class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                >
                  View All
                </button>
              </div>
              <div class="space-y-3">
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-tools-line text-orange-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">Maintenance completed</p>
                    <p class="text-xs text-gray-500">Yesterday, 3:15 PM</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-door-lock-line text-blue-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">Door opened by admin</p>
                    <p class="text-xs text-gray-500">Yesterday, 3:10 PM</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-tools-line text-orange-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">Maintenance scheduled</p>
                    <p class="text-xs text-gray-500">Yesterday, 9:30 AM</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Locker 3 -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="flex items-center justify-between p-4 border-b">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center"
                >
                  <i class="ri-inbox-line text-red-600"></i>
                </div>
                <h3 class="ml-3 font-medium text-gray-800">Locker #3</h3>
              </div>
              <div class="flex items-center">
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"
                >
                  Maintenance Required
                </span>
                <div
                  class="mt-2 bg-red-50 border border-red-200 rounded-lg p-3"
                >
                  <h4 class="text-sm font-medium text-red-800 mb-1">
                    Maintenance Details
                  </h4>
                  <ul class="text-xs text-red-700 space-y-1">
                    <li>• Temperature Sensor: Calibration needed</li>
                    <li>• Weight Sensor: Accuracy check required</li>
                    <li>• Door Lock: Mechanical inspection needed</li>
                  </ul>
                  <p class="text-xs text-red-600 mt-2">
                    Estimated completion: 2025-04-25
                  </p>
                </div>
              </div>
            </div>
            <div class="p-4">
              <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Temperature</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-temp-hot-line text-red-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >28.2°C</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Humidity</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-drop-line text-blue-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800">51%</span>
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Gas Level (MQ2)</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-gas-station-line text-yellow-500 mr-2"></i>
                    <span class="text-lg font-medium text-yellow-600"
                      >Elevated</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Weight</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-scales-line text-red-500 mr-2"></i>
                    <span class="text-lg font-medium text-red-600"
                      >17.5 kg</span
                    >
                  </div>
                </div>
              </div>
              <div class="border-t pt-4 mb-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700"
                    >Locker Owner</span
                  >
                  <div class="flex items-center space-x-2">
                    <button
                      class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                      onclick="editLockerOwner(1)"
                    >
                      <i class="ri-edit-line mr-1"></i> Edit
                    </button>
                    <button
                      class="text-red-500 text-sm hover:text-red-600 whitespace-nowrap !rounded-button"
                      onclick="deleteLockerOwner(1)"
                    >
                      <i class="ri-delete-bin-line mr-1"></i> Delete
                    </button>
                  </div>
                </div>
                <div class="bg-gray-50 rounded-lg p-3">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-gray-700">Emily Johnson</p>
                      <p class="text-xs text-gray-500">
                        emily.johnson@gmail.com
                      </p>
                    </div>
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                    >
                      Active
                    </span>
                  </div>
                </div>
              </div>
              <div class="flex justify-between items-center mb-4">
                <div class="flex items-center">
                  <i class="ri-door-lock-line text-gray-500 mr-2"></i>
                  <span class="text-gray-700"
                    >Door: <span class="font-medium">Closed</span></span
                  >
                </div>
                <div class="flex space-x-2">
                  <button
                    class="bg-primary text-white py-1 px-3 rounded-button text-sm hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-unlock-line mr-1"></i> Open
                  </button>
                  <button
                    class="bg-gray-200 text-gray-700 py-1 px-3 rounded-button text-sm hover:bg-gray-300 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-line mr-1"></i> Close
                  </button>
                </div>
              </div>
              <div class="border-t pt-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700"
                    >User Password</span
                  >
                  <button
                    class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                    id="edit-password-3"
                  >
                    <i class="ri-edit-line mr-1"></i> Edit
                  </button>
                </div>
                <div class="relative" id="password-display-3">
                  <input
                    type="password"
                    value="456789"
                    class="w-full border-gray-300 border rounded-button px-3 py-2 text-gray-700 bg-gray-50"
                    readonly
                  />
                  <div
                    class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer toggle-view-password"
                  >
                    <i class="ri-eye-line text-gray-400"></i>
                  </div>
                </div>
                <div class="hidden" id="password-edit-3">
                  <div class="flex space-x-2">
                    <input
                      type="text"
                      class="w-full border-gray-300 border rounded-button px-3 py-2"
                      placeholder="New 6-digit password"
                      maxlength="6"
                      pattern="[0-9]{6}"
                    />
                    <button
                      class="bg-primary text-white py-2 px-3 rounded-button hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button save-password"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="border-t p-4">
              <div class="flex justify-between items-center mb-3">
                <h4 class="font-medium text-gray-700">Recent Activity</h4>
                <button
                  class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button"
                >
                  View All
                </button>
              </div>
              <div class="space-y-3">
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-alarm-warning-line text-red-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">
                      Overweight alert (17.5 kg)
                    </p>
                    <p class="text-xs text-gray-500">Today, 9:15 AM</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-gas-station-line text-yellow-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">
                      Elevated gas level detected
                    </p>
                    <p class="text-xs text-gray-500">Today, 9:10 AM</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div
                    class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0 mt-1"
                  >
                    <i class="ri-tools-line text-orange-600"></i>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-800">Maintenance scheduled</p>
                    <p class="text-xs text-gray-500">Today, 8:30 AM</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
          <h3 class="text-xl font-semibold text-gray-800 mb-4">
            Sensor Data History
          </h3>
          <div class="mb-6">
            <div class="flex flex-wrap items-center gap-4 mb-4">
              <div class="flex items-center">
                <label
                  for="locker-select"
                  class="block text-sm font-medium text-gray-700 mr-2"
                  >Locker:</label
                >
                <div class="relative">
                  <select
                    id="locker-select"
                    class="pr-8 appearance-none bg-white border border-gray-300 rounded-button py-2 pl-3 pr-10 text-gray-700 focus:outline-none focus:ring-primary focus:border-primary"
                  >
                    <option value="all">All Lockers</option>
                    <option value="1">Locker #1</option>
                    <option value="2">Locker #2</option>
                    <option value="3">Locker #3</option>
                  </select>
                  <div
                    class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"
                  >
                    <i class="ri-arrow-down-s-line"></i>
                  </div>
                </div>
              </div>
              <div class="flex items-center">
                <label
                  for="sensor-select"
                  class="block text-sm font-medium text-gray-700 mr-2"
                  >Sensor:</label
                >
                <div class="relative">
                  <select
                    id="sensor-select"
                    class="pr-8 appearance-none bg-white border border-gray-300 rounded-button py-2 pl-3 pr-10 text-gray-700 focus:outline-none focus:ring-primary focus:border-primary"
                  >
                    <option value="temperature">Temperature</option>
                    <option value="humidity">Humidity</option>
                    <option value="gas">Gas Level (MQ2)</option>
                    <option value="weight">Weight</option>
                  </select>
                  <div
                    class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"
                  >
                    <i class="ri-arrow-down-s-line"></i>
                  </div>
                </div>
              </div>
              <div class="flex items-center">
                <label
                  for="time-range"
                  class="block text-sm font-medium text-gray-700 mr-2"
                  >Time Range:</label
                >
                <div class="relative">
                  <select
                    id="time-range"
                    class="pr-8 appearance-none bg-white border border-gray-300 rounded-button py-2 pl-3 pr-10 text-gray-700 focus:outline-none focus:ring-primary focus:border-primary"
                  >
                    <option value="day">Last 24 Hours</option>
                    <option value="week">Last Week</option>
                    <option value="month">Last Month</option>
                  </select>
                  <div
                    class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"
                  >
                    <i class="ri-arrow-down-s-line"></i>
                  </div>
                </div>
              </div>
            </div>
            <div id="sensor-chart" class="w-full h-80"></div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-xl font-semibold text-gray-800 mb-4">System Logs</h3>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead>
                <tr>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Timestamp
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Locker
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Event
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    User
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Details
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 10:45 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Locker #1
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Door Closed
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Emily Johnson
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    User closed door manually
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 10:44 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Locker #1
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Item Placed
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Emily Johnson
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Weight: 8.2 kg
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 10:42 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Locker #1
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Door Opened
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Emily Johnson
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    User opened with password
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 09:15 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Locker #3
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Overweight Alert
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    System
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Weight: 17.5 kg (Exceeds 15 kg limit)
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 09:10 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Locker #3
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Gas Level Alert
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    System
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Elevated gas level detected
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 08:30 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Locker #3
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Maintenance
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Admin
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Scheduled maintenance
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-23 15:15 PM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Locker #2
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Maintenance
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Admin
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Maintenance completed
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-sm text-gray-500" id="pagination-info">
              Showing 1-7 of 124 logs
            </div>
            <div class="flex space-x-2">
              <button
                id="prev-page"
                class="bg-white text-gray-500 border border-gray-300 rounded-button px-3 py-1 text-sm disabled:opacity-50 whitespace-nowrap !rounded-button"
                disabled
              >
                Previous
              </button>
              <button
                id="next-page"
                class="bg-primary text-white rounded-button px-3 py-1 text-sm hover:bg-primary/90 whitespace-nowrap !rounded-button"
              >
                Next
              </button>
            </div>
          </div>
          <script>
            document.addEventListener("DOMContentLoaded", function () {
              const nextPageBtn = document.getElementById("next-page");
              const prevPageBtn = document.getElementById("prev-page");
              const paginationInfo = document.getElementById("pagination-info");
              let currentPage = 1;
              const totalLogs = 124;
              const logsPerPage = 7;
              const logData = {
                2: [
                  [
                    "2025-04-23 15:00 PM",
                    "Locker #1",
                    "Password Changed",
                    "Admin",
                    "Password updated for security",
                  ],
                  [
                    "2025-04-23 14:45 PM",
                    "Locker #2",
                    "Temperature Alert",
                    "System",
                    "Temperature exceeded threshold (26°C)",
                  ],
                  [
                    "2025-04-23 14:30 PM",
                    "Locker #3",
                    "Door Opened",
                    "Michael Chen",
                    "User opened with password",
                  ],
                  [
                    "2025-04-23 14:15 PM",
                    "Locker #1",
                    "Item Removed",
                    "Sarah Wilson",
                    "Weight: 0.0 kg",
                  ],
                  [
                    "2025-04-23 14:00 PM",
                    "Locker #2",
                    "Maintenance",
                    "Admin",
                    "Regular system check",
                  ],
                  [
                    "2025-04-23 13:45 PM",
                    "Locker #3",
                    "Door Closed",
                    "Michael Chen",
                    "User closed manually",
                  ],
                  [
                    "2025-04-23 13:30 PM",
                    "Locker #1",
                    "Item Placed",
                    "Sarah Wilson",
                    "Weight: 5.8 kg",
                  ],
                ],
              };
              function updateTable(pageData) {
                const tbody = document.querySelector("table tbody");
                tbody.innerHTML = pageData
                  .map(
                    (row) => `
                  <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${row[0]}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${row[1]}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${row[2]}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${row[3]}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${row[4]}</td>
                  </tr>
                `,
                  )
                  .join("");
              }
              nextPageBtn.addEventListener("click", function () {
                currentPage++;
                const startIndex = (currentPage - 1) * logsPerPage + 1;
                const endIndex = Math.min(startIndex + logsPerPage - 1, totalLogs);

                // Update pagination info
                paginationInfo.textContent = `Showing ${startIndex}-${endIndex} of ${totalLogs} logs`;

                // Enable previous button
                prevPageBtn.disabled = false;

                // Update table content with new data
                if (logData[currentPage]) {
                  // Add fade out effect
                  const tbody = document.querySelector("table tbody");
                  tbody.style.opacity = "0";

                  setTimeout(() => {
                    updateTable(logData[currentPage]);
                    tbody.style.opacity = "1";
                  }, 150);
                }

                // Disable next button if we're on the last page
                if (endIndex >= totalLogs) {
                  nextPageBtn.disabled = true;
                }
              });
              prevPageBtn.addEventListener("click", function () {
                currentPage--;
                const startIndex = (currentPage - 1) * logsPerPage + 1;
                const endIndex = startIndex + logsPerPage - 1;

                // Update pagination info
                paginationInfo.textContent = `Showing ${startIndex}-${endIndex} of ${totalLogs} logs`;

                // Disable previous button if we're on the first page
                if (currentPage === 1) {
                  prevPageBtn.disabled = true;
                }

                // Enable next button
                nextPageBtn.disabled = false;

                // Add fade out effect
                const tbody = document.querySelector("table tbody");
                tbody.style.opacity = "0";

                setTimeout(() => {
                  // Update table content with previous data
                  if (currentPage === 1) {
                    // Reset to original table content
                    tbody.innerHTML = document.querySelector("table tbody").innerHTML;
                  } else if (logData[currentPage]) {
                    updateTable(logData[currentPage]);
                  }
                  tbody.style.opacity = "1";
                }, 150);
              });
            });
          </script>
          <style>
            table tbody {
              transition: opacity 150ms ease-in-out;
            }
          </style>
        </div>
      </main>
    </div>
    <div id="user-dashboard" class="hidden min-h-screen bg-gray-50">
      <header class="bg-white shadow-sm">
        <div
          class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center"
        >
          <div class="flex items-center">
            <h1 class="font-['Pacifico'] text-2xl text-primary">logo</h1>
            <span class="ml-4 text-gray-600 text-sm">Smart Locker System</span>
          </div>
          <div class="flex items-center space-x-4">
            <div class="flex items-center">
              <div
                class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center"
              >
                <i class="ri-user-line text-gray-600"></i>
              </div>
              <div class="relative ml-2">
                <div class="flex flex-col">
                  <span
                    id="user-name"
                    class="text-gray-700 font-medium cursor-pointer hover:text-primary"
                    >Emily Johnson</span
                  >
                  <span
                    id="user-username"
                    class="text-sm text-gray-500 cursor-pointer hover:text-primary"
                    >emily.j</span
                  >
                  <span id="user-email" class="text-sm text-gray-500"
                    >emily.johnson@gmail.com</span
                  >
                </div>
                <div
                  id="user-name-edit"
                  class="hidden absolute top-0 left-0 right-0 bg-white shadow-lg rounded-lg p-3 z-10 w-64"
                >
                  <div class="mb-2">
                    <label class="text-xs text-gray-500 mb-1 block"
                      >Display Name</label
                    >
                    <input
                      type="text"
                      class="w-full border-gray-300 border rounded-button px-2 py-1 text-sm"
                      value="Emily Johnson"
                    />
                  </div>
                  <div class="mb-2">
                    <label class="text-xs text-gray-500 mb-1 block"
                      >Username</label
                    >
                    <input
                      type="text"
                      class="w-full border-gray-300 border rounded-button px-2 py-1 text-sm"
                      value="emily.j"
                    />
                  </div>
                  <div class="mb-3">
                    <label class="text-xs text-gray-500 mb-1 block"
                      >Email</label
                    >
                    <input
                      type="email"
                      class="w-full border-gray-300 border rounded-button px-2 py-1 text-sm"
                      value="emily.johnson@gmail.com"
                    />
                    <div
                      id="user-email-verification-status"
                      class="hidden mt-1 text-xs text-orange-500"
                    >
                      Verification email sent. Please check your inbox.
                    </div>
                  </div>
                  <div class="flex justify-end space-x-2">
                    <button
                      class="text-gray-500 hover:text-gray-700 text-sm px-2 py-1"
                      onclick="cancelUserEdit()"
                    >
                      Cancel
                    </button>
                    <button
                      class="text-primary hover:text-primary/80 text-sm px-2 py-1"
                      onclick="saveUserName()"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <button
              id="user-logout"
              class="bg-gray-200 text-gray-700 py-2 px-4 rounded-button hover:bg-gray-300 transition duration-200 whitespace-nowrap !rounded-button"
            >
              <i class="ri-logout-box-line mr-1"></i> Logout
            </button>
          </div>
        </div>
      </header>
      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="mb-6">
          <h2 class="text-2xl font-semibold text-gray-800">My Locker</h2>
          <p class="text-gray-600">Monitor and manage your smart locker</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
          <div
            class="bg-white rounded-lg shadow-md overflow-hidden lg:col-span-2"
          >
            <div class="flex items-center justify-between p-4 border-b">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center"
                >
                  <i class="ri-inbox-line text-blue-600"></i>
                </div>
                <h3 class="ml-3 font-medium text-gray-800">Locker #1</h3>
              </div>
              <div class="flex items-center">
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                >
                  Occupied
                </span>
              </div>
            </div>
            <div class="p-4">
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Temperature</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-temp-hot-line text-orange-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >24.5°C</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Humidity</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-drop-line text-blue-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800">45%</span>
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Gas Level (MQ2)</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-gas-station-line text-gray-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >Normal</span
                    >
                  </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                  <div class="text-sm text-gray-500">Weight</div>
                  <div class="flex items-center mt-1">
                    <i class="ri-scales-line text-gray-500 mr-2"></i>
                    <span class="text-lg font-medium text-gray-800"
                      >8.2 kg</span
                    >
                  </div>
                </div>
              </div>
              <div class="flex justify-between items-center mb-6">
                <div class="flex items-center">
                  <i class="ri-door-lock-line text-gray-500 mr-2"></i>
                  <span class="text-gray-700"
                    >Door: <span class="font-medium">Closed</span></span
                  >
                </div>
                <div class="flex space-x-2">
                  <div class="relative">
                    <input
                      type="password"
                      id="user-locker-password"
                      class="w-48 border-gray-300 border rounded-button px-3 py-2 text-gray-700"
                      placeholder="Enter 6-digit password"
                    />
                    <div
                      class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer"
                      id="toggle-user-password"
                    >
                      <i class="ri-eye-line text-gray-400"></i>
                    </div>
                  </div>
                  <button
                    class="bg-primary text-white py-2 px-4 rounded-button hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-unlock-line mr-1"></i> Open
                  </button>
                  <button
                    class="bg-gray-200 text-gray-700 py-2 px-4 rounded-button hover:bg-gray-300 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    <i class="ri-lock-line mr-1"></i> Close
                  </button>
                </div>
              </div>
              <div id="user-locker-chart" class="w-full h-64 mb-4"></div>
            </div>
          </div>
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="p-4 border-b">
              <h3 class="font-medium text-gray-800">Locker Settings</h3>
            </div>
            <div class="p-4">
              <div class="mb-6">
                <h4 class="text-sm font-medium text-gray-700 mb-2">
                  Change Password
                </h4>
                <div class="space-y-3">
                  <div class="relative">
                    <label
                      for="current-password"
                      class="block text-xs text-gray-500 mb-1"
                      >Current Password</label
                    >
                    <input
                      type="password"
                      id="current-password"
                      class="w-full border-gray-300 border rounded-button px-3 py-2 text-gray-700"
                      value="123456"
                      readonly
                    />
                    <div
                      class="absolute bottom-0 right-0 pr-3 flex items-center h-10 cursor-pointer toggle-view-password"
                    >
                      <i class="ri-eye-line text-gray-400"></i>
                    </div>
                  </div>
                  <div>
                    <label
                      for="new-password"
                      class="block text-xs text-gray-500 mb-1"
                      >New Password</label
                    >
                    <input
                      type="text"
                      id="new-password"
                      class="w-full border-gray-300 border rounded-button px-3 py-2"
                      placeholder="Enter 6-digit password"
                      maxlength="6"
                      pattern="[0-9]{6}"
                    />
                  </div>
                  <div>
                    <label
                      for="confirm-password"
                      class="block text-xs text-gray-500 mb-1"
                      >Confirm Password</label
                    >
                    <input
                      type="text"
                      id="confirm-password"
                      class="w-full border-gray-300 border rounded-button px-3 py-2"
                      placeholder="Confirm 6-digit password"
                      maxlength="6"
                      pattern="[0-9]{6}"
                    />
                  </div>
                  <button
                    class="w-full bg-primary text-white py-2 px-4 rounded-button hover:bg-primary/90 transition duration-200 whitespace-nowrap !rounded-button"
                  >
                    Update Password
                  </button>
                </div>
              </div>
              <div class="border-t pt-6">
                <h4 class="text-sm font-medium text-gray-700 mb-2">
                  Notifications
                </h4>
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <span class="text-gray-600">Door Activity</span>
                    <label class="switch">
                      <input type="checkbox" checked />
                      <span class="slider"></span>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-gray-600">Sensor Alerts</span>
                    <label class="switch">
                      <input type="checkbox" checked />
                      <span class="slider"></span>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-gray-600">Maintenance Updates</span>
                    <label class="switch">
                      <input type="checkbox" />
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-xl font-semibold text-gray-800 mb-4">
            Activity History
          </h3>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead>
                <tr>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Timestamp
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Event
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Details
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Status
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 10:45 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Door Closed
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Closed manually
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                    >
                      Success
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 10:44 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Item Placed
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Weight: 8.2 kg
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                    >
                      Success
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-24 10:42 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Door Opened
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Opened with password
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                    >
                      Success
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-23 15:30 PM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Password Changed
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Password updated successfully
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                    >
                      Success
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-23 09:15 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Door Closed
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Closed manually
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                    >
                      Success
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-23 09:10 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Item Removed
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Weight: 0.0 kg
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                    >
                      Success
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-04-23 09:05 AM
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Door Opened
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Opened with password
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                    >
                      Success
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              Showing 1-7 of 42 activities
            </div>
            <div class="flex space-x-2">
              <button
                class="bg-white text-gray-500 border border-gray-300 rounded-button px-3 py-1 text-sm disabled:opacity-50 whitespace-nowrap !rounded-button"
                disabled
              >
                Previous
              </button>
              <button
                class="bg-primary text-white rounded-button px-3 py-1 text-sm hover:bg-primary/90 whitespace-nowrap !rounded-button"
              >
                Next
              </button>
            </div>
          </div>
        </div>
      </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <script>
      // Add these functions at the top level
      function editLockerOwner(lockerId) {
        const modal = document.createElement("div");
        modal.className =
          "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50";
        modal.innerHTML = `
      <div class="relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Edit Locker Owner</h3>
      <div class="space-y-4">
      <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
      <input type="text" class="w-full border-gray-300 border rounded-button px-3 py-2" value="Emily Johnson">
      </div>
      <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
      <input type="email" class="w-full border-gray-300 border rounded-button px-3 py-2" value="emily.johnson@gmail.com">
      </div>
      <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Admin Password</label>
      <input type="password" class="w-full border-gray-300 border rounded-button px-3 py-2" placeholder="Enter admin password">
      </div>
      </div>
      <div class="flex justify-end space-x-2 mt-6">
      <button class="text-gray-500 hover:text-gray-700 px-4 py-2" onclick="this.closest('.fixed').remove()">Cancel</button>
      <button class="bg-primary text-white px-4 py-2 rounded-button hover:bg-primary/90" onclick="saveLockerOwner(${lockerId}, this)">Save Changes</button>
      </div>
      </div>
      `;
        document.body.appendChild(modal);
      }
      function deleteLockerOwner(lockerId) {
        const modal = document.createElement("div");
        modal.className =
          "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50";
        modal.innerHTML = `
      <div class="relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Delete Locker Owner</h3>
      <p class="text-gray-600 mb-4">Are you sure you want to remove Emily Johnson as the owner of this locker? This action cannot be undone.</p>
      <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Admin Password</label>
      <input type="password" class="w-full border-gray-300 border rounded-button px-3 py-2" placeholder="Enter admin password">
      </div>
      <div class="flex justify-end space-x-2 mt-6">
      <button class="text-gray-500 hover:text-gray-700 px-4 py-2" onclick="this.closest('.fixed').remove()">Cancel</button>
      <button class="bg-red-500 text-white px-4 py-2 rounded-button hover:bg-red-600" onclick="confirmDeleteOwner(${lockerId}, this)">Delete Owner</button>
      </div>
      </div>
      `;
        document.body.appendChild(modal);
      }
      function addLockerOwner(lockerId) {
        const modal = document.createElement("div");
        modal.className =
          "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50";
        modal.innerHTML = `
      <div class="relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Add Locker Owner</h3>
      <div class="space-y-4">
      <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
      <input type="text" class="w-full border-gray-300 border rounded-button px-3 py-2" placeholder="Enter name">
      </div>
      <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
      <input type="email" class="w-full border-gray-300 border rounded-button px-3 py-2" placeholder="Enter email">
      </div>
      <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Admin Password</label>
      <input type="password" class="w-full border-gray-300 border rounded-button px-3 py-2" placeholder="Enter admin password">
      </div>
      </div>
      <div class="flex justify-end space-x-2 mt-6">
      <button class="text-gray-500 hover:text-gray-700 px-4 py-2" onclick="this.closest('.fixed').remove()">Cancel</button>
      <button class="bg-primary text-white px-4 py-2 rounded-button hover:bg-primary/90" onclick="saveNewOwner(${lockerId}, this)">Add Owner</button>
      </div>
      </div>
      `;
        document.body.appendChild(modal);
      }
      function saveLockerOwner(lockerId, button) {
        const modal = button.closest(".fixed");
        const adminPassword = modal.querySelector('input[type="password"]').value;
        if (adminPassword === "admin123") {
          const name = modal.querySelector('input[type="text"]').value;
          const email = modal.querySelector('input[type="email"]').value;
          // Update the owner information in the UI
          const ownerInfo = document
            .querySelector(`[onclick="editLockerOwner(${lockerId})"]`)
            .closest(".border-t")
            .querySelector(".bg-gray-50");
          ownerInfo.innerHTML = `
      <div class="flex items-center justify-between">
      <div>
      <p class="text-sm text-gray-700">${name}</p>
      <p class="text-xs text-gray-500">${email}</p>
      </div>
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
      Active
      </span>
      </div>
      `;
          modal.remove();
          showNotification("Owner information updated successfully");
        } else {
          showError(modal, "Invalid admin password");
        }
      }
      function confirmDeleteOwner(lockerId, button) {
        const modal = button.closest(".fixed");
        const adminPassword = modal.querySelector('input[type="password"]').value;
        if (adminPassword === "admin123") {
          // Update the UI to show vacant status
          const ownerInfo = document
            .querySelector(`[onclick="deleteLockerOwner(${lockerId})"]`)
            .closest(".border-t");
          ownerInfo.innerHTML = `
      <div class="flex justify-between items-center mb-2">
      <span class="text-sm font-medium text-gray-700">Locker Owner</span>
      <button class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button" onclick="addLockerOwner(${lockerId})">
      <i class="ri-user-add-line mr-1"></i> Add Owner
      </button>
      </div>
      <div class="bg-gray-50 rounded-lg p-3">
      <div class="flex items-center justify-between">
      <p class="text-sm text-gray-500">No owner assigned</p>
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
      Vacant
      </span>
      </div>
      </div>
      `;
          modal.remove();
          showNotification("Owner removed successfully");
        } else {
          showError(modal, "Invalid admin password");
        }
      }
      function saveNewOwner(lockerId, button) {
        const modal = button.closest(".fixed");
        const adminPassword = modal.querySelector('input[type="password"]').value;
        if (adminPassword === "admin123") {
          const name = modal.querySelector('input[type="text"]').value;
          const email = modal.querySelector('input[type="email"]').value;
          if (!name || !email) {
            showError(modal, "Please fill in all fields");
            return;
          }
          // Update the UI to show new owner
          const ownerInfo = document
            .querySelector(`[onclick="addLockerOwner(${lockerId})"]`)
            .closest(".border-t");
          ownerInfo.innerHTML = `
      <div class="flex justify-between items-center mb-2">
      <span class="text-sm font-medium text-gray-700">Locker Owner</span>
      <div class="flex items-center space-x-2">
      <button class="text-primary text-sm hover:text-primary/80 whitespace-nowrap !rounded-button" onclick="editLockerOwner(${lockerId})">
      <i class="ri-edit-line mr-1"></i> Edit
      </button>
      <button class="text-red-500 text-sm hover:text-red-600 whitespace-nowrap !rounded-button" onclick="deleteLockerOwner(${lockerId})">
      <i class="ri-delete-bin-line mr-1"></i> Delete
      </button>
      </div>
      </div>
      <div class="bg-gray-50 rounded-lg p-3">
      <div class="flex items-center justify-between">
      <div>
      <p class="text-sm text-gray-700">${name}</p>
      <p class="text-xs text-gray-500">${email}</p>
      </div>
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
      Active
      </span>
      </div>
      </div>
      `;
          modal.remove();
          showNotification("New owner added successfully");
        } else {
          showError(modal, "Invalid admin password");
        }
      }
      function showError(modal, message) {
        const existingError = modal.querySelector(".text-red-500");
        if (existingError) existingError.remove();
        const error = document.createElement("p");
        error.className = "text-red-500 text-sm mt-2";
        error.textContent = message;
        modal.querySelector(".space-y-4, div:not(.space-y-4)").appendChild(error);
      }
      function showNotification(message) {
        const notification = document.createElement("div");
        notification.className =
          "fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50";
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 3000);
      }
      document.addEventListener("DOMContentLoaded", function () {
        // Password Recovery Modal Functionality
        const forgotPasswordLink = document.getElementById("forgot-password-link");
        const passwordRecoveryModal = document.getElementById(
          "password-recovery-modal",
        );
        const closeRecoveryModal = document.getElementById("close-recovery-modal");
        const cancelRecovery = document.getElementById("cancel-recovery");
        const recoveryForm = document.getElementById("recovery-form");
        const recoverySuccess = document.getElementById("recovery-success");
        function showRecoveryModal() {
          passwordRecoveryModal.classList.remove("hidden");
          document.body.style.overflow = "hidden";
        }
        function hideRecoveryModal() {
          passwordRecoveryModal.classList.add("hidden");
          document.body.style.overflow = "";
          recoveryForm.reset();
          recoveryForm.classList.remove("hidden");
          recoverySuccess.classList.add("hidden");
        }
        forgotPasswordLink.addEventListener("click", function (e) {
          e.preventDefault();
          showRecoveryModal();
        });
        closeRecoveryModal.addEventListener("click", hideRecoveryModal);
        cancelRecovery.addEventListener("click", hideRecoveryModal);
        passwordRecoveryModal.addEventListener("click", function (e) {
          if (e.target === passwordRecoveryModal) {
            hideRecoveryModal();
          }
        });
        recoveryForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const email = document.getElementById("recovery-email").value;
          // Simulate sending reset link
          recoveryForm.classList.add("hidden");
          recoverySuccess.classList.remove("hidden");
          // Auto close after 3 seconds
          setTimeout(hideRecoveryModal, 3000);
        });
        // Name editing functionality
        const adminName = document.getElementById("admin-name");
        const adminNameEdit = document.getElementById("admin-name-edit");
        const userName = document.getElementById("user-name");
        const userNameEdit = document.getElementById("user-name-edit");
        if (adminName) {
          adminName.addEventListener("click", function () {
            adminName.classList.add("hidden");
            adminNameEdit.classList.remove("hidden");
            const input = adminNameEdit.querySelector("input");
            input.value = adminName.textContent;
            input.focus();
          });
        }
        if (userName) {
          userName.addEventListener("click", function () {
            userName.classList.add("hidden");
            userNameEdit.classList.remove("hidden");
            const input = userNameEdit.querySelector("input");
            input.value = userName.textContent;
            input.focus();
          });
        }
        window.saveAdminName = function () {
          const inputs = adminNameEdit.querySelectorAll("input");
          const newName = inputs[0].value.trim();
          const newUsername = inputs[1].value.trim();
          const newEmail = inputs[2].value.trim();
          const oldEmail = document.getElementById("admin-email").textContent;
          if (newName && newUsername && newEmail) {
            if (newEmail !== oldEmail) {
              // Show verification status
              document
                .getElementById("email-verification-status")
                .classList.remove("hidden");
              // Simulate sending verification email
              setTimeout(() => {
                // Create verification modal
                const verificationModal = document.createElement("div");
                verificationModal.className =
                  "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50";
                verificationModal.innerHTML = `
      <div class="relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Email Verification</h3>
      <p class="text-gray-600 mb-4">Please enter the verification code sent to ${newEmail}</p>
      <input type="text" class="w-full border-gray-300 border rounded-button px-3 py-2 mb-4" placeholder="Enter 6-digit code" maxlength="6">
      <div class="flex justify-end space-x-2">
      <button class="text-gray-500 hover:text-gray-700 px-4 py-2" onclick="this.closest('.fixed').remove()">Cancel</button>
      <button class="bg-primary text-white px-4 py-2 rounded-button hover:bg-primary/90" onclick="verifyEmailCode(this)">Verify</button>
      </div>
      </div>
      `;
                document.body.appendChild(verificationModal);
              }, 1000);
            } else {
              updateAdminInfo(newName, newUsername, newEmail);
            }
          }
        };
        function verifyEmailCode(button) {
          const code = button.closest(".relative").querySelector("input").value;
          if (code.length === 6) {
            const inputs = adminNameEdit.querySelectorAll("input");
            updateAdminInfo(
              inputs[0].value.trim(),
              inputs[1].value.trim(),
              inputs[2].value.trim(),
            );
            button.closest(".fixed").remove();
            document
              .getElementById("email-verification-status")
              .classList.add("hidden");
          }
        }
        function updateAdminInfo(name, username, email) {
          adminName.textContent = name;
          document.getElementById("admin-username").textContent = username;
          document.getElementById("admin-email").textContent = email;
          adminName.classList.remove("hidden");
          adminNameEdit.classList.add("hidden");
        }
        window.cancelAdminEdit = function () {
          adminNameEdit.classList.add("hidden");
        };
        window.saveUserName = function () {
          const inputs = userNameEdit.querySelectorAll("input");
          const newName = inputs[0].value.trim();
          const newUsername = inputs[1].value.trim();
          const newEmail = inputs[2].value.trim();
          const oldEmail = document.getElementById("user-email").textContent;
          if (newName && newUsername && newEmail) {
            if (newEmail !== oldEmail) {
              // Show verification status
              document
                .getElementById("user-email-verification-status")
                .classList.remove("hidden");
              // Simulate sending verification email
              setTimeout(() => {
                // Create verification modal
                const verificationModal = document.createElement("div");
                verificationModal.className =
                  "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50";
                verificationModal.innerHTML = `
      <div class="relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Email Verification</h3>
      <p class="text-gray-600 mb-4">Please enter the verification code sent to ${newEmail}</p>
      <input type="text" class="w-full border-gray-300 border rounded-button px-3 py-2 mb-4" placeholder="Enter 6-digit code" maxlength="6">
      <div class="flex justify-end space-x-2">
      <button class="text-gray-500 hover:text-gray-700 px-4 py-2" onclick="this.closest('.fixed').remove()">Cancel</button>
      <button class="bg-primary text-white px-4 py-2 rounded-button hover:bg-primary/90" onclick="verifyUserEmailCode(this)">Verify</button>
      </div>
      </div>
      `;
                document.body.appendChild(verificationModal);
              }, 1000);
            } else {
              updateUserInfo(newName, newUsername, newEmail);
            }
          }
        };
        function verifyUserEmailCode(button) {
          const code = button.closest(".relative").querySelector("input").value;
          if (code.length === 6) {
            const inputs = userNameEdit.querySelectorAll("input");
            updateUserInfo(
              inputs[0].value.trim(),
              inputs[1].value.trim(),
              inputs[2].value.trim(),
            );
            button.closest(".fixed").remove();
            document
              .getElementById("user-email-verification-status")
              .classList.add("hidden");
          }
        }
        function updateUserInfo(name, username, email) {
          userName.textContent = name;
          document.getElementById("user-username").textContent = username;
          document.getElementById("user-email").textContent = email;
          userName.classList.remove("hidden");
          userNameEdit.classList.add("hidden");
        }
        window.cancelUserEdit = function () {
          userNameEdit.classList.add("hidden");
        };
        // Handle click outside to cancel editing
        document.addEventListener("click", function (e) {
          if (
            adminNameEdit &&
            !adminNameEdit.contains(e.target) &&
            !adminName.contains(e.target)
          ) {
            adminName.classList.remove("hidden");
            adminNameEdit.classList.add("hidden");
          }
          if (
            userNameEdit &&
            !userNameEdit.contains(e.target) &&
            !userName.contains(e.target)
          ) {
            userName.classList.remove("hidden");
            userNameEdit.classList.add("hidden");
          }
        });
        // Handle Enter key to save
        document.addEventListener("keydown", function (e) {
          if (e.key === "Enter") {
            if (!adminNameEdit.classList.contains("hidden")) {
              saveAdminName();
            }
            if (!userNameEdit.classList.contains("hidden")) {
              saveUserName();
            }
          }
        });
        // Login page functionality
        const loginBtn = document.getElementById("login-btn");
        const loginPage = document.getElementById("login-page");
        const adminDashboard = document.getElementById("admin-dashboard");
        const userDashboard = document.getElementById("user-dashboard");
        const adminLogout = document.getElementById("admin-logout");
        const userLogout = document.getElementById("user-logout");
        const togglePassword = document.getElementById("toggle-password");
        const passwordField = document.getElementById("password");
        const adminRole = document.getElementById("admin-role");
        const userRole = document.getElementById("user-role");
        const usernameField = document.getElementById("username");
        // Add helper text container for admin credentials
        const helperTextContainer = document.createElement("div");
        helperTextContainer.id = "admin-helper-text";
        helperTextContainer.className = "text-sm text-gray-500 mt-2 hidden";
        helperTextContainer.textContent = "Admin email: admin@gmail.com";
        document.querySelector(".mb-4").appendChild(helperTextContainer);
        // Handle role change
        adminRole.addEventListener("change", function () {
          if (this.checked) {
            helperTextContainer.classList.remove("hidden");
            usernameField.placeholder = "Enter admin email";
            passwordField.placeholder = "Enter admin password";
          }
        });
        userRole.addEventListener("change", function () {
          if (this.checked) {
            helperTextContainer.classList.add("hidden");
            usernameField.placeholder = "Enter your email";
            passwordField.placeholder = "Enter your password";
          }
        });
        loginBtn.addEventListener("click", function () {
          const username = usernameField.value;
          const password = passwordField.value;
          const isAdmin = adminRole.checked;
          // Remove any existing error messages
          const existingError = loginBtn.parentElement.querySelector(".text-red-500");
          if (existingError) existingError.remove();
          if (!username || !password) {
            const errorMsg = document.createElement("div");
            errorMsg.className = "text-red-500 text-sm mt-2";
            errorMsg.textContent = "Please enter both username and password";
            loginBtn.parentElement.appendChild(errorMsg);
            setTimeout(() => errorMsg.remove(), 3000);
            return;
          }
          // Admin credentials
          const adminCredentials = {
            username: "admin@gmail.com",
            password: "admin123",
          };
          // User credentials
          const userCredentials = [
            {
              username: "user1@gmail.com",
              password: "user001",
            },
            {
              username: "user2@gmail.com",
              password: "user002",
            },
            {
              username: "user3@gmail.com",
              password: "user003",
            },
          ];
          if (isAdmin) {
            // Validate admin credentials
            if (
              username === adminCredentials.username &&
              password === adminCredentials.password
            ) {
              loginPage.classList.add("hidden");
              adminDashboard.classList.remove("hidden");
            } else if (username === userCredentials.username) {
              const errorMsg = document.createElement("div");
              errorMsg.className = "text-red-500 text-sm mt-2";
              errorMsg.textContent = "Please use the user login for this account";
              loginBtn.parentElement.appendChild(errorMsg);
              setTimeout(() => errorMsg.remove(), 3000);
            } else {
              const errorMsg = document.createElement("div");
              errorMsg.className = "text-red-500 text-sm mt-2";
              errorMsg.textContent = "Invalid admin credentials";
              loginBtn.parentElement.appendChild(errorMsg);
              setTimeout(() => errorMsg.remove(), 3000);
            }
          } else {
            // Regular user login
            const matchedUser = userCredentials.find(
              (user) => user.username === username && user.password === password,
            );
            if (matchedUser) {
              loginPage.classList.add("hidden");
              userDashboard.classList.remove("hidden");
            } else if (username === adminCredentials.username) {
              const errorMsg = document.createElement("div");
              errorMsg.className = "text-red-500 text-sm mt-2";
              errorMsg.textContent = "Please use the admin login for this account";
              loginBtn.parentElement.appendChild(errorMsg);
              setTimeout(() => errorMsg.remove(), 3000);
            } else {
              const errorMsg = document.createElement("div");
              errorMsg.className = "text-red-500 text-sm mt-2";
              errorMsg.textContent = "Invalid user credentials";
              loginBtn.parentElement.appendChild(errorMsg);
              setTimeout(() => errorMsg.remove(), 3000);
            }
          }
        });
        adminLogout.addEventListener("click", function () {
          adminDashboard.classList.add("hidden");
          loginPage.classList.remove("hidden");
          document.getElementById("username").value = "";
          passwordField.value = "";
        });
        userLogout.addEventListener("click", function () {
          userDashboard.classList.add("hidden");
          loginPage.classList.remove("hidden");
          document.getElementById("username").value = "";
          passwordField.value = "";
        });
        togglePassword.addEventListener("click", function () {
          const type =
            passwordField.getAttribute("type") === "password" ? "text" : "password";
          passwordField.setAttribute("type", type);
          this.querySelector("i").className =
            type === "password"
              ? "ri-eye-line text-gray-400"
              : "ri-eye-off-line text-gray-400";
        });
        // Toggle view password for all password fields with the toggle-view-password class
        document.querySelectorAll(".toggle-view-password").forEach(function (toggle) {
          toggle.addEventListener("click", function () {
            const passwordInput = this.parentElement.querySelector("input");
            const type =
              passwordInput.getAttribute("type") === "password" ? "text" : "password";
            passwordInput.setAttribute("type", type);
            this.querySelector("i").className =
              type === "password"
                ? "ri-eye-line text-gray-400"
                : "ri-eye-off-line text-gray-400";
          });
        });
        // Toggle user password field visibility
        const toggleUserPassword = document.getElementById("toggle-user-password");
        const userPasswordField = document.getElementById("user-locker-password");
        if (toggleUserPassword && userPasswordField) {
          toggleUserPassword.addEventListener("click", function () {
            const type =
              userPasswordField.getAttribute("type") === "password"
                ? "text"
                : "password";
            userPasswordField.setAttribute("type", type);
            this.querySelector("i").className =
              type === "password"
                ? "ri-eye-line text-gray-400"
                : "ri-eye-off-line text-gray-400";
          });
        }
        // Password edit functionality
        const editPasswordBtns = [
          document.getElementById("edit-password-1"),
          document.getElementById("edit-password-2"),
          document.getElementById("edit-password-3"),
        ];
        editPasswordBtns.forEach((btn, index) => {
          if (btn) {
            btn.addEventListener("click", function () {
              const displayEl = document.getElementById(
                `password-display-${index + 1}`,
              );
              const editEl = document.getElementById(`password-edit-${index + 1}`);
              displayEl.classList.add("hidden");
              editEl.classList.remove("hidden");
            });
          }
        });
        document.querySelectorAll(".save-password").forEach((btn) => {
          btn.addEventListener("click", function () {
            const editContainer = this.closest('[id^="password-edit-"]');
            const index = editContainer.id.split("-")[2];
            const displayEl = document.getElementById(`password-display-${index}`);
            const newPassword = editContainer.querySelector("input").value;
            if (newPassword && /^\d{6}$/.test(newPassword)) {
              displayEl.querySelector("input").value = newPassword;
              editContainer.classList.add("hidden");
              displayEl.classList.remove("hidden");
            }
          });
        });
        // Initialize charts
        if (document.getElementById("sensor-chart")) {
          const sensorChart = echarts.init(document.getElementById("sensor-chart"));
          const option = {
            animation: false,
            color: [
              "rgba(87, 181, 231, 1)",
              "rgba(141, 211, 199, 1)",
              "rgba(251, 191, 114, 1)",
            ],
            tooltip: {
              trigger: "axis",
              backgroundColor: "rgba(255, 255, 255, 0.8)",
              textStyle: {
                color: "#1f2937",
              },
            },
            legend: {
              data: ["Locker #1", "Locker #2", "Locker #3"],
              textStyle: {
                color: "#1f2937",
              },
            },
            grid: {
              left: "3%",
              right: "4%",
              bottom: "3%",
              containLabel: true,
            },
            xAxis: {
              type: "category",
              boundaryGap: false,
              data: ["00:00", "04:00", "08:00", "12:00", "16:00", "20:00", "24:00"],
              axisLabel: {
                color: "#1f2937",
              },
            },
            yAxis: {
              type: "value",
              axisLabel: {
                formatter: "{value} °C",
                color: "#1f2937",
              },
            },
            series: [
              {
                name: "Locker #1",
                type: "line",
                smooth: true,
                lineStyle: {
                  width: 3,
                },
                showSymbol: false,
                areaStyle: {
                  opacity: 0.1,
                  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    {
                      offset: 0,
                      color: "rgba(87, 181, 231, 0.3)",
                    },
                    {
                      offset: 1,
                      color: "rgba(87, 181, 231, 0.1)",
                    },
                  ]),
                },
                data: [23.2, 23.5, 24.0, 24.5, 24.2, 23.8, 23.5],
              },
              {
                name: "Locker #2",
                type: "line",
                smooth: true,
                lineStyle: {
                  width: 3,
                },
                showSymbol: false,
                areaStyle: {
                  opacity: 0.1,
                  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    {
                      offset: 0,
                      color: "rgba(141, 211, 199, 0.3)",
                    },
                    {
                      offset: 1,
                      color: "rgba(141, 211, 199, 0.1)",
                    },
                  ]),
                },
                data: [22.8, 22.9, 23.3, 23.8, 23.5, 23.2, 22.9],
              },
              {
                name: "Locker #3",
                type: "line",
                smooth: true,
                lineStyle: {
                  width: 3,
                },
                showSymbol: false,
                areaStyle: {
                  opacity: 0.1,
                  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    {
                      offset: 0,
                      color: "rgba(251, 191, 114, 0.3)",
                    },
                    {
                      offset: 1,
                      color: "rgba(251, 191, 114, 0.1)",
                    },
                  ]),
                },
                data: [24.5, 25.2, 26.8, 28.2, 27.5, 26.2, 25.8],
              },
            ],
          };
          sensorChart.setOption(option);
          // Handle sensor and time range changes
          document
            .getElementById("sensor-select")
            .addEventListener("change", function () {
              const sensor = this.value;
              let yAxisLabel = "";
              let data1 = [];
              let data2 = [];
              let data3 = [];
              switch (sensor) {
                case "temperature":
                  yAxisLabel = "°C";
                  data1 = [23.2, 23.5, 24.0, 24.5, 24.2, 23.8, 23.5];
                  data2 = [22.8, 22.9, 23.3, 23.8, 23.5, 23.2, 22.9];
                  data3 = [24.5, 25.2, 26.8, 28.2, 27.5, 26.2, 25.8];
                  break;
                case "humidity":
                  yAxisLabel = "%";
                  data1 = [42, 43, 45, 47, 46, 44, 43];
                  data2 = [40, 41, 42, 43, 42, 41, 40];
                  data3 = [48, 49, 51, 52, 51, 50, 49];
                  break;
                case "gas":
                  yAxisLabel = "ppm";
                  data1 = [120, 125, 130, 128, 125, 122, 120];
                  data2 = [115, 118, 120, 122, 120, 118, 115];
                  data3 = [150, 180, 220, 250, 230, 200, 180];
                  break;
                case "weight":
                  yAxisLabel = "kg";
                  data1 = [0, 0, 8.2, 8.2, 8.2, 8.2, 8.2];
                  data2 = [0, 0, 0, 0, 0, 0, 0];
                  data3 = [12.5, 15.2, 16.8, 17.5, 17.5, 17.5, 17.5];
                  break;
              }
              option.yAxis.axisLabel.formatter = `{value} ${yAxisLabel}`;
              option.series[0].data = data1;
              option.series[1].data = data2;
              option.series[2].data = data3;
              sensorChart.setOption(option);
            });
          document
            .getElementById("time-range")
            .addEventListener("change", function () {
              const timeRange = this.value;
              let xAxisData = [];
              switch (timeRange) {
                case "day":
                  xAxisData = [
                    "00:00",
                    "04:00",
                    "08:00",
                    "12:00",
                    "16:00",
                    "20:00",
                    "24:00",
                  ];
                  break;
                case "week":
                  xAxisData = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
                  break;
                case "month":
                  xAxisData = ["Week 1", "Week 2", "Week 3", "Week 4"];
                  break;
              }
              option.xAxis.data = xAxisData;
              sensorChart.setOption(option);
            });
          // Handle window resize
          window.addEventListener("resize", function () {
            sensorChart.resize();
          });
        }
        // Initialize user locker chart
        if (document.getElementById("user-locker-chart")) {
          const userLockerChart = echarts.init(
            document.getElementById("user-locker-chart"),
          );
          const userOption = {
            animation: false,
            color: ["rgba(87, 181, 231, 1)", "rgba(141, 211, 199, 1)"],
            tooltip: {
              trigger: "axis",
              backgroundColor: "rgba(255, 255, 255, 0.8)",
              textStyle: {
                color: "#1f2937",
              },
            },
            legend: {
              data: ["Temperature", "Humidity"],
              textStyle: {
                color: "#1f2937",
              },
            },
            grid: {
              left: "3%",
              right: "4%",
              bottom: "3%",
              containLabel: true,
            },
            xAxis: {
              type: "category",
              boundaryGap: false,
              data: ["08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00"],
              axisLabel: {
                color: "#1f2937",
              },
            },
            yAxis: [
              {
                type: "value",
                name: "Temperature",
                position: "left",
                axisLabel: {
                  formatter: "{value} °C",
                  color: "#1f2937",
                },
              },
              {
                type: "value",
                name: "Humidity",
                position: "right",
                axisLabel: {
                  formatter: "{value} %",
                  color: "#1f2937",
                },
              },
            ],
            series: [
              {
                name: "Temperature",
                type: "line",
                yAxisIndex: 0,
                smooth: true,
                lineStyle: {
                  width: 3,
                },
                showSymbol: false,
                areaStyle: {
                  opacity: 0.1,
                  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    {
                      offset: 0,
                      color: "rgba(87, 181, 231, 0.3)",
                    },
                    {
                      offset: 1,
                      color: "rgba(87, 181, 231, 0.1)",
                    },
                  ]),
                },
                data: [23.5, 23.8, 24.2, 24.5, 24.3, 24.0, 23.8],
              },
              {
                name: "Humidity",
                type: "line",
                yAxisIndex: 1,
                smooth: true,
                lineStyle: {
                  width: 3,
                },
                showSymbol: false,
                areaStyle: {
                  opacity: 0.1,
                  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    {
                      offset: 0,
                      color: "rgba(141, 211, 199, 0.3)",
                    },
                    {
                      offset: 1,
                      color: "rgba(141, 211, 199, 0.1)",
                    },
                  ]),
                },
                data: [42, 43, 44, 45, 45, 44, 43],
              },
            ],
          };
          userLockerChart.setOption(userOption);
          // Handle window resize
          window.addEventListener("resize", function () {
            userLockerChart.resize();
          });
        }
      });
    </script>
  </body>
</html>
